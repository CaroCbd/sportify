
<div class="my-3">

  <p>Commencez par choisir votre activité :</p>
  <%= form_with(url: new_event_path, method: :get, data: {controller: "auto-submit" , action:"change->auto-submit#submit"}) do %>
    <%= select_tag :sport_name, options_for_select(@sports.map(&:name), params[:sport_name]), data: {turbo_frame: "location_list"}, class:"col-12 rounded-3 p-2", placeholder: "Choisissez un sport" %>
    <%# <%= submit_tag "Submit", class:"border rounded-4 p-2" %>
  <% end %>

</div>


  <%= simple_form_for [@event] do |f| %>

    <div class="d-flex flex-column justify-content-center ">
      <%= f.error_notification %>
      <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>


      <div class="col-11 ml-2 justify-content-start">

        <%= f.input :name,
        label: false,
        error: 'Merci de nommer votre event',
        class: "margin-0",
        required: true,
        input_html: {
          placeholder: "Le nom de votre événement"
        }
        %>
      </div>


        <%= f.input :description,
        label: false,
        error: 'Décrivez votre événement:',
        input_html: {
          placeholder: "Détaillez votre événement "
        }
        %>

        <%# # playgrounds_names_and_ids = []
        # @playgrounds.each do |pg|
        #   playgrounds_names_and_ids << [playground.name, playground.id]
        # end %>


        <%# Faireu n controller qui encadre les 2 inputs %>

        <%# Faire un data-action sur le frerot (change ou sleect) %>

      <% if params[:sport_name] %>
          <%# Data target sur lui %>
        <%= turbo_frame_tag "location_list" do %>
          <% f.input :playground_id,
            label: false,
            input_html: {
              value: "Enter your name",
              readonly: true,
              onfocus: "this.value=''; this.removeAttribute('readonly');"
            },
            error: 'Choisissez parmi les lieux de la liste',
            collection: @playgrounds.map { |playground| [playground.location.name, playground.id] }
          %>
        <% end %>
      <% end %>
      <label for="event_event_date" class="my-3">
        Date de l'évènement
      </label>
      <div class="border rounded-4 fake-input-date">
        <input type="date" id="event_event_date" name="event[event_date]" class="datepicker-input" placeholder="">
        <%# <span>Choisir la date</span> %>
      </div>

      <div data-controller="datepicker" class="time-pickers col-10 mt-4 d-flex justify-content-center">
        <div class="col-4 mx-3">
          <%= f.input :start_time,
              as: :string,
              label: false,
              input_html: {
                placeholder: "Début",
                data: {
                  controller: "datepicker",
                  action: "click->datepicker#open_as_time_picker"
                },
                class: "border rounded-4 p-2 mx-2 col-4"
              }
          %>
        </div>

        <div class="col-4 mx-3">
          <%= f.input :end_time,
              as: :string,
              label: false,
              input_html: {
                placeholder: "Fin",
                data: {
                  controller: "datepicker",
                  action: "click->datepicker#open_as_time_picker"
                },
                class: "border rounded-4 p-2 mx-2"
              }
          %>
        </div>
      </div>



      <div class="d-flex justify-content-center mt-2">
          <%= f.button :submit, "C'est parti!", class: "btn btn-secondary col-3 mx-auto my-3 text-center text-justify" %>
        </div>

    </div>

  </div>
<% end %>
