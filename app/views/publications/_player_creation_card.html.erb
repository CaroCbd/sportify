<% if publication.photo.attached? %>
  <div class="publi-with-photo w-100">
    <li class="p-0 card-publi-feed my-3 pt-3 w-100 d-flex justify-content-start">
      <div class="card-sans-avatar d-flex flex-column align-items-end w-100">
        <div class="intro-publi-photo d-flex align-items-center justify-content-start w-100">
          <div class="ms-0 ">
            <%= cl_image_tag publication.user.photo.key, class:"avatar" %>
          </div>
          <div class="name-and-time-ago d-flex flex-column align-items-start ms-1">
            <div class="d-flex justify-content-start fst-italic">
              <small>Il y a <%= time_ago_in_words(publication.posted_at) %></small>
            </div>
            <div class="">
              <b>@<%= publication.user.username%></b> a ajout√© une photo
            </div>
          </div>
        </div>
        <div class="card-publi-photo mt-2 d-flex flex-column justify-content-center align-items-center ">
          <div class="publication-img w-100 d-flex justify-content-center align-items-center mx-2 mt-3">
            <%= cl_image_tag publication.photo.key, width: 200 %>
          </div>
          <div class="publication-img w-100 texte-publi flex-wrap d-flex justify-content-center px-3">
            <%= publication.content %>
          </div>
          <div class="icones mb-2">

            <div class="d-flex justify-content-center mx-4 gap-2 align-items-center" >
              <div class="d-flex align-items-center justify-content-center gap-1" data-like-button-target="like">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path data-action="click->like-button#like" fill="currentColor" d="m12.1 18.55l-.1.1l-.11-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3"/>
                </svg>
                <div class="card-details-event"><%= publication.likes %> </div>
              </div>
              <div class="cette-div d-flex align-items-center justify-content-center gap-1" data-display-comments-target="comment" >
                <svg data-action="click->display-comments#display" width="14" height="12" viewBox="0 0 14 12" fill="Red" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6.78477 1.74157C5.81375 1.74157 4.9058 1.90698 4.06091 2.23779C3.21603 2.56861 2.54488 3.01485 2.04747 3.57652C1.55006 4.13819 1.30135 4.74508 1.30135 5.39718C1.30135 5.93029 1.47152 6.43841 1.81186 6.92155C2.15219 7.40468 2.63175 7.82236 3.25054 8.17459L3.87171 8.53159L3.67893 9.21701C3.56469 9.65017 3.3981 10.0595 3.17914 10.4451C3.90265 10.1452 4.55714 9.73822 5.1426 9.22415L5.44962 8.95284L5.85659 8.99568C6.18503 9.03376 6.49442 9.0528 6.78477 9.0528C7.7558 9.0528 8.66375 8.88739 9.50863 8.55658C10.3535 8.22576 11.0247 7.77952 11.5221 7.21785C12.0195 6.65618 12.2682 6.04929 12.2682 5.39718C12.2682 4.74508 12.0195 4.13819 11.5221 3.57652C11.0247 3.01485 10.3535 2.56861 9.50863 2.23779C8.66375 1.90698 7.7558 1.74157 6.78477 1.74157ZM13.1821 5.39718C13.1821 6.22541 12.8965 6.99056 12.3253 7.69265C11.7541 8.39474 10.9783 8.94927 9.99772 9.35624C9.01717 9.76321 7.94619 9.9667 6.78477 9.9667C6.45158 9.9667 6.10649 9.94766 5.74949 9.90958C4.80703 10.7426 3.71225 11.3185 2.46515 11.6374C2.23192 11.7041 1.9606 11.7564 1.65121 11.7945H1.61551C1.54411 11.7945 1.47985 11.7695 1.42273 11.7195C1.36561 11.6696 1.32753 11.6041 1.30849 11.5232V11.5161C1.29421 11.497 1.29302 11.4685 1.30492 11.4304C1.31682 11.3923 1.32158 11.3685 1.3192 11.359C1.31682 11.3495 1.32753 11.3268 1.35133 11.2911L1.39417 11.2269L1.44415 11.1662L1.50127 11.1019C1.53459 11.0639 1.60837 10.9818 1.72261 10.8556C1.83684 10.7295 1.91895 10.639 1.96893 10.5843C2.01891 10.5296 2.09269 10.4356 2.19027 10.3023C2.28785 10.169 2.3652 10.0476 2.42231 9.93814C2.47943 9.82866 2.54369 9.68824 2.61509 9.51689C2.68649 9.34553 2.74837 9.16465 2.80073 8.97426C2.05342 8.55063 1.46438 8.02704 1.03361 7.40349C0.602837 6.77994 0.387451 6.11117 0.387451 5.39718C0.387451 4.56896 0.673046 3.8038 1.24424 3.10172C1.81543 2.39963 2.59129 1.8451 3.57183 1.43813C4.55237 1.03115 5.62336 0.827667 6.78477 0.827667C7.94619 0.827667 9.01717 1.03115 9.99772 1.43813C10.9783 1.8451 11.7541 2.39963 12.3253 3.10172C12.8965 3.8038 13.1821 4.56896 13.1821 5.39718Z" fill="black"/>
                </svg>
                <div class="card-details-event"> <%= rand(1..8) %> </div>
                <%# <div class="d-none" > %>
                  <%# <%= render "comments", publication: publication %>
                <%# </div> %>
              </div>
            </div>
          </div>
        </div>
      </div>
  </li>
</div>

<% else %>
  <li class="p-0 card-publi-feed publi-sans-photo my-3 pt-3 w-100 d-flex justify-content-start">
    <div class="col ms-0 align-items-center justify-content-center">
      <%= cl_image_tag publication.user.photo.key, class:"avatar" %>
    </div>
    <div class="d-flex py-0 align-items-center justify-content-start">
      <div class="col ms-2 align-items-center justify-content-center">
        <div class="d-flex flex-column">
          <div class="d-flex m-auto">
            <div class="ms-0">
              @<%= publication.user.username %>
            </div>
            <div class="d-flex fst-italic">
              <small>Il y a <%= time_ago_in_words(publication.posted_at) %></small>
            </div>
          </div>
          </div>
          <div class="d-flex flex-column fs-4 object-fit-contain">
              <%= publication.content %>
          </div>
          
          <div class="d-flex align-items-center justify-content-center gap-1" data-like-button-target="like">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path data-action="click->like-button#like" fill="currentColor" d="m12.1 18.55l-.1.1l-.11-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3"/>
                </svg>
                <div class="card-details-event"><%= publication.likes %> </div>
              </div>
              <div class="cette-div d-flex align-items-center justify-content-center gap-1" data-display-comments-target="comment" >
                <svg data-action="click->display-comments#display" width="14" height="12" viewBox="0 0 14 12" fill="Red" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6.78477 1.74157C5.81375 1.74157 4.9058 1.90698 4.06091 2.23779C3.21603 2.56861 2.54488 3.01485 2.04747 3.57652C1.55006 4.13819 1.30135 4.74508 1.30135 5.39718C1.30135 5.93029 1.47152 6.43841 1.81186 6.92155C2.15219 7.40468 2.63175 7.82236 3.25054 8.17459L3.87171 8.53159L3.67893 9.21701C3.56469 9.65017 3.3981 10.0595 3.17914 10.4451C3.90265 10.1452 4.55714 9.73822 5.1426 9.22415L5.44962 8.95284L5.85659 8.99568C6.18503 9.03376 6.49442 9.0528 6.78477 9.0528C7.7558 9.0528 8.66375 8.88739 9.50863 8.55658C10.3535 8.22576 11.0247 7.77952 11.5221 7.21785C12.0195 6.65618 12.2682 6.04929 12.2682 5.39718C12.2682 4.74508 12.0195 4.13819 11.5221 3.57652C11.0247 3.01485 10.3535 2.56861 9.50863 2.23779C8.66375 1.90698 7.7558 1.74157 6.78477 1.74157ZM13.1821 5.39718C13.1821 6.22541 12.8965 6.99056 12.3253 7.69265C11.7541 8.39474 10.9783 8.94927 9.99772 9.35624C9.01717 9.76321 7.94619 9.9667 6.78477 9.9667C6.45158 9.9667 6.10649 9.94766 5.74949 9.90958C4.80703 10.7426 3.71225 11.3185 2.46515 11.6374C2.23192 11.7041 1.9606 11.7564 1.65121 11.7945H1.61551C1.54411 11.7945 1.47985 11.7695 1.42273 11.7195C1.36561 11.6696 1.32753 11.6041 1.30849 11.5232V11.5161C1.29421 11.497 1.29302 11.4685 1.30492 11.4304C1.31682 11.3923 1.32158 11.3685 1.3192 11.359C1.31682 11.3495 1.32753 11.3268 1.35133 11.2911L1.39417 11.2269L1.44415 11.1662L1.50127 11.1019C1.53459 11.0639 1.60837 10.9818 1.72261 10.8556C1.83684 10.7295 1.91895 10.639 1.96893 10.5843C2.01891 10.5296 2.09269 10.4356 2.19027 10.3023C2.28785 10.169 2.3652 10.0476 2.42231 9.93814C2.47943 9.82866 2.54369 9.68824 2.61509 9.51689C2.68649 9.34553 2.74837 9.16465 2.80073 8.97426C2.05342 8.55063 1.46438 8.02704 1.03361 7.40349C0.602837 6.77994 0.387451 6.11117 0.387451 5.39718C0.387451 4.56896 0.673046 3.8038 1.24424 3.10172C1.81543 2.39963 2.59129 1.8451 3.57183 1.43813C4.55237 1.03115 5.62336 0.827667 6.78477 0.827667C7.94619 0.827667 9.01717 1.03115 9.99772 1.43813C10.9783 1.8451 11.7541 2.39963 12.3253 3.10172C12.8965 3.8038 13.1821 4.56896 13.1821 5.39718Z" fill="black"/>
                </svg>
                <div class="card-details-event"> <%= rand(1..8) %> </div>
          </div>
      </div>
    </div>
  </li>
<% end %>
